\doxysection{Perspective\+Camera.\+h}
\hypertarget{PerspectiveCamera_8h_source}{}\label{PerspectiveCamera_8h_source}\index{/mnt/c/Users/lefte/Mujin/MastersThesis/Taz/TazGraph/TazGraphEngine/Camera2.5D/PerspectiveCamera.h@{/mnt/c/Users/lefte/Mujin/MastersThesis/Taz/TazGraph/TazGraphEngine/Camera2.5D/PerspectiveCamera.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{preprocessor}{\#pragma\ once}}
\DoxyCodeLine{00002\ \textcolor{preprocessor}{\#include\ <SDL2/SDL.h>}}
\DoxyCodeLine{00003\ \textcolor{preprocessor}{\#include\ "{}ICamera.h"{}}}
\DoxyCodeLine{00004\ }
\DoxyCodeLine{00005\ \textcolor{keyword}{enum\ class}\ ViewMode\ \{}
\DoxyCodeLine{00006\ \ \ \ \ Y\_UP,}
\DoxyCodeLine{00007\ \ \ \ \ Z\_UP}
\DoxyCodeLine{00008\ \};}
\DoxyCodeLine{00009\ }
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00011\ \textcolor{keyword}{class\ }\mbox{\hyperlink{classPerspectiveCamera}{PerspectiveCamera}}\ :\ \textcolor{keyword}{public}\ \mbox{\hyperlink{classICamera}{ICamera}}\{}
\DoxyCodeLine{00012\ \textcolor{keyword}{public}:}
\DoxyCodeLine{00013\ \ \ \ \ glm::vec3\ eyePos\{\ 0,0,0\ \};}
\DoxyCodeLine{00014\ \ \ \ \ glm::vec3\ aimPos\{\ 0,0,0\ \};}
\DoxyCodeLine{00015\ \ \ \ \ glm::vec3\ upDir\{0,-\/1,0\};}
\DoxyCodeLine{00016\ \ \ \ \ \textcolor{keywordtype}{float}\ zFar\ =\ 1000000.0f;}
\DoxyCodeLine{00017\ }
\DoxyCodeLine{00018\ \ \ \ \ ViewMode\ currentViewMode\ =\ ViewMode::Y\_UP;}
\DoxyCodeLine{00019\ }
\DoxyCodeLine{00020\ \ \ \ \ \mbox{\hyperlink{classPerspectiveCamera}{PerspectiveCamera}}()\ :\ \_position(0.0f,\ 0.0f),}
\DoxyCodeLine{00021\ \ \ \ \ \ \ \ \ \_cameraMatrix(1.0f),\ \ \ \ \textcolor{comment}{//I}}
\DoxyCodeLine{00022\ \ \ \ \ \ \ \ \ \_projectionMatrix(1.0f),\ \ \ \ \ \ \ \ \textcolor{comment}{//I}}
\DoxyCodeLine{00023\ \ \ \ \ \ \ \ \ \_viewMatrix(1.0f),}
\DoxyCodeLine{00024\ \ \ \ \ \ \ \ \ \_scale(1.0f),}
\DoxyCodeLine{00025\ \ \ \ \ \ \ \ \ \_cameraChange(\textcolor{keyword}{true}),}
\DoxyCodeLine{00026\ \ \ \ \ \ \ \ \ \_screenWidth(800),}
\DoxyCodeLine{00027\ \ \ \ \ \ \ \ \ \_screenHeight(640)}
\DoxyCodeLine{00028\ \ \ \ \ \{}
\DoxyCodeLine{00029\ \ \ \ \ \ \ \ \ eyePos\ =\ glm::vec3(0.f,\ 0.f,\ -\/770.0f);}
\DoxyCodeLine{00030\ \ \ \ \ \ \ \ \ aimPos\ =\ glm::vec3(0.f,\ 0.f,\ 0.f);}
\DoxyCodeLine{00031\ \ \ \ \ \}}
\DoxyCodeLine{00032\ }
\DoxyCodeLine{00033\ \ \ \ \ \mbox{\hyperlink{classPerspectiveCamera}{PerspectiveCamera}}(glm::vec3\ eye\_pos,\ glm::vec3\ aim\_pos)\ :\ \mbox{\hyperlink{classPerspectiveCamera}{PerspectiveCamera}}()}
\DoxyCodeLine{00034\ \ \ \ \ \{}
\DoxyCodeLine{00035\ \ \ \ \ \ \ \ \ eyePos\ =\ eye\_pos;}
\DoxyCodeLine{00036\ \ \ \ \ \ \ \ \ aimPos\ =\ aim\_pos;}
\DoxyCodeLine{00037\ \ \ \ \ \}}
\DoxyCodeLine{00038\ }
\DoxyCodeLine{00039\ \ \ \ \ \mbox{\hyperlink{classPerspectiveCamera}{\string~PerspectiveCamera}}()}
\DoxyCodeLine{00040\ \ \ \ \ \{}
\DoxyCodeLine{00041\ }
\DoxyCodeLine{00042\ \ \ \ \ \}}
\DoxyCodeLine{00043\ }
\DoxyCodeLine{00044\ \ \ \ \ \textcolor{keywordtype}{void}\ init()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00045\ \ \ \ \ \ \ \ \ \_projectionMatrix\ =\ glm::perspective(glm::radians(45.0f),\ (\textcolor{keywordtype}{float})\_screenWidth\ /\ (\textcolor{keywordtype}{float})\_screenHeight,\ 0.1f,\ zFar);\ \textcolor{comment}{//left,\ right,\ top,\ bottom}}
\DoxyCodeLine{00046\ \ \ \ \ \ \ \ \ updateCameraOrientation();}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00048\ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ glm::mat4(1.0f);}
\DoxyCodeLine{00049\ }
\DoxyCodeLine{00050\ \ \ \ \ \ \ \ \ glm::vec3\ scale(\_scale,\ \_scale,\ 1.0f);}
\DoxyCodeLine{00051\ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ glm::scale(\_cameraMatrix,\ scale);}
\DoxyCodeLine{00052\ }
\DoxyCodeLine{00053\ }
\DoxyCodeLine{00054\ \ \ \ \ \ \ \ \ glm::vec3\ translate(-\/\_position.x,\ -\/\_position.y,\ 0.0f);}
\DoxyCodeLine{00055\ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ glm::translate(\_cameraMatrix,\ translate);\ \textcolor{comment}{//if\ glm\ ortho\ =\ -\/1,1,-\/1,1\ then\ 1\ horizontal\ with\ -\/400,-\/320\ to\ bottom-\/left}}
\DoxyCodeLine{00056\ }
\DoxyCodeLine{00057\ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ \_projectionMatrix\ *\ \_viewMatrix\ *\ \_cameraMatrix;}
\DoxyCodeLine{00058\ }
\DoxyCodeLine{00059\ \ \ \ \ \}}
\DoxyCodeLine{00060\ }
\DoxyCodeLine{00061\ \ \ \ \ \textcolor{keywordtype}{void}\ update()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00062\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (\_cameraChange)\ \{}
\DoxyCodeLine{00063\ \ \ \ \ \ \ \ \ \ \ \ \ updateCameraOrientation();}
\DoxyCodeLine{00064\ }
\DoxyCodeLine{00065\ \ \ \ \ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ glm::mat4(1.0f);}
\DoxyCodeLine{00066\ }
\DoxyCodeLine{00067\ }
\DoxyCodeLine{00068\ \ \ \ \ \ \ \ \ \ \ \ \ glm::vec3\ translate(-\/\_position.x,\ -\/\_position.y,\ 0.0f);}
\DoxyCodeLine{00069\ \ \ \ \ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ glm::translate(\_cameraMatrix,\ translate);\ \textcolor{comment}{//if\ glm\ ortho\ =\ -\/1,1,-\/1,1\ then\ 1\ horizontal\ with\ -\/400,-\/320\ to\ bottom-\/left}}
\DoxyCodeLine{00070\ }
\DoxyCodeLine{00071\ \ \ \ \ \ \ \ \ \ \ \ \ glm::vec3\ scale(\_scale,\ \_scale,\ 1.0f);}
\DoxyCodeLine{00072\ \ \ \ \ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ glm::scale(\_cameraMatrix,\ scale);}
\DoxyCodeLine{00073\ }
\DoxyCodeLine{00074\ }
\DoxyCodeLine{00075\ \ \ \ \ \ \ \ \ \ \ \ \ \_cameraMatrix\ =\ \_projectionMatrix\ *\ \_viewMatrix\ *\ \_cameraMatrix;}
\DoxyCodeLine{00076\ }
\DoxyCodeLine{00077\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00078\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00079\ \ \ \ \ \}}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00081\ \ \ \ \ \textcolor{keywordtype}{void}\ updateCameraOrientation()\ \{}
\DoxyCodeLine{00082\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (currentViewMode\ ==\ ViewMode::Y\_UP)\ \{}
\DoxyCodeLine{00083\ \ \ \ \ \ \ \ \ \ \ \ \ upDir\ =\ glm::vec3(0.0f,\ -\/1.0f,\ 0.0f);}
\DoxyCodeLine{00084\ }
\DoxyCodeLine{00085\ \ \ \ \ \ \ \ \ \ \ \ \ setOrientation(}
\DoxyCodeLine{00086\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eyePos,\ aimPos,\ upDir\ }
\DoxyCodeLine{00087\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00088\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00089\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{00090\ \ \ \ \ \ \ \ \ \ \ \ \ upDir\ =\ glm::vec3(0.0f,\ 0.0f,\ -\/1.0f);}
\DoxyCodeLine{00091\ }
\DoxyCodeLine{00092\ \ \ \ \ \ \ \ \ \ \ \ \ setOrientation(}
\DoxyCodeLine{00093\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ eyePos,\ aimPos,\ upDir\ }
\DoxyCodeLine{00094\ \ \ \ \ \ \ \ \ \ \ \ \ );}
\DoxyCodeLine{00095\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00096\ \ \ \ \ \}}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00098\ \ \ \ \ \textcolor{keywordtype}{void}\ setOrientation(glm::vec3\ eye,\ glm::vec3\ target,\ glm::vec3\ up)\ \{}
\DoxyCodeLine{00099\ \ \ \ \ \ \ \ \ \_viewMatrix\ =\ glm::lookAt(eye,\ target,\ up);}
\DoxyCodeLine{00100\ \ \ \ \ \}}
\DoxyCodeLine{00101\ }
\DoxyCodeLine{00102\ \ \ \ \ glm::vec2\ convertScreenToWorld(glm::vec2\ screenCoords)\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00103\ \ \ \ \ \ \ \ \ SDL\_FRect\ cameraRect\ =\ getCameraRect();}
\DoxyCodeLine{00104\ }
\DoxyCodeLine{00105\ \ \ \ \ \ \ \ \ glm::vec2\ worldCoords;}
\DoxyCodeLine{00106\ }
\DoxyCodeLine{00107\ \ \ \ \ \ \ \ \ worldCoords\ =\ screenCoords;}
\DoxyCodeLine{00108\ \ \ \ \ \ \ \ \ worldCoords\ /=\ \_scale;}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00110\ \ \ \ \ \ \ \ \ worldCoords.x\ =\ worldCoords.x\ +\ cameraRect.x;}
\DoxyCodeLine{00111\ \ \ \ \ \ \ \ \ worldCoords.y\ =\ worldCoords.y\ +\ cameraRect.y;}
\DoxyCodeLine{00112\ }
\DoxyCodeLine{00113\ }
\DoxyCodeLine{00114\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ worldCoords;}
\DoxyCodeLine{00115\ \ \ \ \ \}}
\DoxyCodeLine{00116\ }
\DoxyCodeLine{00117\ \ \ \ \ \textcolor{comment}{//setters}}
\DoxyCodeLine{00118\ \ \ \ \ \textcolor{keywordtype}{void}\ setPosition(\textcolor{keyword}{const}\ glm::vec3\ newPosition)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00119\ \ \ \ \ \ \ \ \ eyePos\ =\ newPosition;}
\DoxyCodeLine{00120\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00121\ \ \ \ \ \}}
\DoxyCodeLine{00122\ }
\DoxyCodeLine{00123\ \ \ \ \ \textcolor{keywordtype}{void}\ setPosition\_X(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ newPosition)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00124\ \ \ \ \ \ \ \ \ eyePos.x\ =\ newPosition;}
\DoxyCodeLine{00125\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00126\ \ \ \ \ \}}
\DoxyCodeLine{00127\ }
\DoxyCodeLine{00128\ \ \ \ \ \textcolor{keywordtype}{void}\ setPosition\_Y(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ newPosition)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00129\ \ \ \ \ \ \ \ \ eyePos.y\ =\ newPosition;}
\DoxyCodeLine{00130\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00131\ \ \ \ \ \}}
\DoxyCodeLine{00132\ }
\DoxyCodeLine{00133\ \ \ \ \ \textcolor{keywordtype}{void}\ setPosition\_Z(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ newPosition)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00134\ \ \ \ \ \ \ \ \ eyePos.z\ =\ newPosition;}
\DoxyCodeLine{00135\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00136\ \ \ \ \ \}}
\DoxyCodeLine{00137\ }
\DoxyCodeLine{00138\ \ \ \ \ \textcolor{keywordtype}{void}\ movePosition\_Hor(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ step)\ \{}
\DoxyCodeLine{00139\ \ \ \ \ \ \ \ \ glm::vec3\ direction\ =\ glm::normalize(aimPos\ -\/\ eyePos);\ \ \textcolor{comment}{//\ Get\ movement\ direction}}
\DoxyCodeLine{00140\ }
\DoxyCodeLine{00141\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ right\ vector\ (perpendicular\ to\ direction\ and\ up)}}
\DoxyCodeLine{00142\ \ \ \ \ \ \ \ \ glm::vec3\ right\ =\ glm::normalize(glm::cross(direction,\ upDir));}
\DoxyCodeLine{00143\ }
\DoxyCodeLine{00144\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ the\ camera\ horizontally\ along\ the\ right\ vector}}
\DoxyCodeLine{00145\ \ \ \ \ \ \ \ \ eyePos\ +=\ right\ *\ step;}
\DoxyCodeLine{00146\ \ \ \ \ \ \ \ \ aimPos\ +=\ right\ *\ step;}
\DoxyCodeLine{00147\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00148\ \ \ \ \ \}}
\DoxyCodeLine{00149\ \ \ \ \ \textcolor{keywordtype}{void}\ movePosition\_Vert(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ step)\ \{}
\DoxyCodeLine{00150\ \ \ \ \ \ \ \ \ glm::vec3\ direction\ =\ glm::normalize(aimPos\ -\/\ eyePos);\ \ \textcolor{comment}{//\ Get\ movement\ direction}}
\DoxyCodeLine{00151\ }
\DoxyCodeLine{00152\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Move\ the\ camera\ horizontally\ along\ the\ right\ vector}}
\DoxyCodeLine{00153\ \ \ \ \ \ \ \ \ eyePos\ +=\ upDir\ *\ step;}
\DoxyCodeLine{00154\ \ \ \ \ \ \ \ \ aimPos\ +=\ upDir\ *\ step;}
\DoxyCodeLine{00155\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00156\ \ \ \ \ \}}
\DoxyCodeLine{00157\ }
\DoxyCodeLine{00158\ \ \ \ \ \textcolor{keywordtype}{void}\ movePosition\_Forward(\textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ step)\ \{}
\DoxyCodeLine{00159\ \ \ \ \ \ \ \ \ glm::vec3\ direction\ =\ glm::normalize(aimPos\ -\/\ eyePos);}
\DoxyCodeLine{00160\ \ \ \ \ \ \ \ \ eyePos\ +=\ direction\ *\ step;}
\DoxyCodeLine{00161\ \ \ \ \ \ \ \ \ aimPos\ +=\ direction\ *\ step;}
\DoxyCodeLine{00162\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00163\ \ \ \ \ \}}
\DoxyCodeLine{00164\ }
\DoxyCodeLine{00165\ \ \ \ \ \textcolor{keywordtype}{void}\ setAimPos(\textcolor{keyword}{const}\ glm::vec3\ newAimPos)\ \{}
\DoxyCodeLine{00166\ \ \ \ \ \ \ \ \ aimPos\ =\ newAimPos;}
\DoxyCodeLine{00167\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00168\ \ \ \ \ \}}
\DoxyCodeLine{00169\ }
\DoxyCodeLine{00170\ \ \ \ \ \textcolor{keywordtype}{void}\ moveAimPos(glm::vec3\ startingAimPos,\ \textcolor{keyword}{const}\ glm::vec2\ distance)\ \{}
\DoxyCodeLine{00171\ \ \ \ \ \ \ \ \ aimPos\ =\ startingAimPos;}
\DoxyCodeLine{00172\ \ \ \ \ \ \ \ \ \textcolor{keyword}{const}\ \textcolor{keywordtype}{float}\ sensitivity\ =\ 0.0001f;}
\DoxyCodeLine{00173\ }
\DoxyCodeLine{00174\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ yaw\ =\ distance.x\ *\ sensitivity;\ \ }
\DoxyCodeLine{00175\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ pitch\ =\ distance.y\ *\ sensitivity;}
\DoxyCodeLine{00176\ }
\DoxyCodeLine{00177\ \ \ \ \ \ \ \ \ glm::vec3\ direction\ =\ glm::normalize(aimPos\ -\/\ eyePos);}
\DoxyCodeLine{00178\ }
\DoxyCodeLine{00179\ \ \ \ \ \ \ \ \ direction\ =\ glm::rotate(direction,\ yaw,\ upDir);}
\DoxyCodeLine{00180\ }
\DoxyCodeLine{00181\ \ \ \ \ \ \ \ \ glm::vec3\ right\ =\ glm::normalize(glm::cross(direction,\ upDir));}
\DoxyCodeLine{00182\ }
\DoxyCodeLine{00183\ \ \ \ \ \ \ \ \ direction\ =\ glm::rotate(direction,\ pitch,\ right);}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Update\ the\ aimPos\ based\ on\ the\ new\ direction}}
\DoxyCodeLine{00186\ \ \ \ \ \ \ \ \ aimPos\ =\ eyePos\ +\ direction;}
\DoxyCodeLine{00187\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00188\ \ \ \ \ \}}
\DoxyCodeLine{00189\ }
\DoxyCodeLine{00190\ \ \ \ \ glm::vec3\ getEulerAnglesFromDirection(glm::vec3\ direction)\ \{}
\DoxyCodeLine{00191\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ yaw\ =\ glm::atan(direction.x,\ direction.z);}
\DoxyCodeLine{00192\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ pitch\ =\ glm::asin(-\/direction.y);}
\DoxyCodeLine{00193\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ roll\ =\ 0.0f;}
\DoxyCodeLine{00194\ }
\DoxyCodeLine{00195\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ glm::vec3(glm::degrees(pitch),\ glm::degrees(yaw),\ glm::degrees(roll));}
\DoxyCodeLine{00196\ \ \ \ \ \}}
\DoxyCodeLine{00197\ }
\DoxyCodeLine{00198\ }
\DoxyCodeLine{00199\ \ \ \ \ \textcolor{keywordtype}{float}\ getZFar()\ \{}
\DoxyCodeLine{00200\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ zFar;}
\DoxyCodeLine{00201\ \ \ \ \ \}}
\DoxyCodeLine{00202\ }
\DoxyCodeLine{00203\ \ \ \ \ glm::vec3\ getAimPos()\ \{}
\DoxyCodeLine{00204\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ aimPos;}
\DoxyCodeLine{00205\ \ \ \ \ \}}
\DoxyCodeLine{00206\ }
\DoxyCodeLine{00207\ \ \ \ \ \textcolor{keywordtype}{void}\ setScale(\textcolor{keywordtype}{float}\ newScale)\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00208\ \ \ \ \ \ \ \ \ \_scale\ =\ newScale;}
\DoxyCodeLine{00209\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00210\ \ \ \ \ \}}
\DoxyCodeLine{00211\ }
\DoxyCodeLine{00212\ \ \ \ \ \textcolor{comment}{//getters}}
\DoxyCodeLine{00213\ \ \ \ \ glm::vec3\ getPosition()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00214\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ eyePos;}
\DoxyCodeLine{00215\ \ \ \ \ \}}
\DoxyCodeLine{00216\ }
\DoxyCodeLine{00217\ \ \ \ \ \textcolor{keywordtype}{float}\ getScale()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00218\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_scale;}
\DoxyCodeLine{00219\ \ \ \ \ \}}
\DoxyCodeLine{00220\ }
\DoxyCodeLine{00221\ \ \ \ \ glm::mat4\ getCameraMatrix()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00222\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_cameraMatrix;}
\DoxyCodeLine{00223\ \ \ \ \ \}}
\DoxyCodeLine{00224\ }
\DoxyCodeLine{00225\ \ \ \ \ glm::ivec2\ getCameraDimensions()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00226\ \ \ \ \ \ \ \ \ glm::vec2\ cameraDimensions\ =\ \{\ \_screenWidth,\ \_screenHeight\ \};}
\DoxyCodeLine{00227\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cameraDimensions;}
\DoxyCodeLine{00228\ \ \ \ \ \}}
\DoxyCodeLine{00229\ }
\DoxyCodeLine{00230\ \ \ \ \ SDL\_FRect\ getCameraRect()\textcolor{keyword}{\ const\ override\ }\{}
\DoxyCodeLine{00231\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cameraWidth\ =\ getCameraDimensions().x\ /\ getScale();}
\DoxyCodeLine{00232\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cameraHeight\ =\ getCameraDimensions().y\ /\ getScale();}
\DoxyCodeLine{00233\ }
\DoxyCodeLine{00234\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cameraX\ =\ \_position.x\ -\/\ cameraWidth\ /\ 2.0f\ ;}
\DoxyCodeLine{00235\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ cameraY\ =\ \_position.y\ -\/\ cameraHeight\ /\ 2.0f\ ;}
\DoxyCodeLine{00236\ }
\DoxyCodeLine{00237\ \ \ \ \ \ \ \ \ SDL\_FRect\ cameraRect\ =\ \{\ cameraX\ ,\ cameraY\ ,\ cameraWidth,\ cameraHeight\ \};}
\DoxyCodeLine{00238\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ cameraRect;}
\DoxyCodeLine{00239\ \ \ \ \ \}}
\DoxyCodeLine{00240\ }
\DoxyCodeLine{00241\ \ \ \ \ \textcolor{keywordtype}{void}\ setCameraMatrix(glm::mat4\ newMatrix)\ \{}
\DoxyCodeLine{00242\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00243\ \ \ \ \ \}}
\DoxyCodeLine{00244\ \ \ \ \ \textcolor{keywordtype}{void}\ resetCameraPosition()\ \{}
\DoxyCodeLine{00245\ }
\DoxyCodeLine{00246\ \ \ \ \ \ \ \ \ \_position\ =\ glm::vec2(0.0f,0.0f);}
\DoxyCodeLine{00247\ \ \ \ \ \ \ \ \ \_scale\ =\ 1.0f;}
\DoxyCodeLine{00248\ }
\DoxyCodeLine{00249\ \ \ \ \ \ \ \ \ eyePos\ =\ glm::vec3(0.f,\ 0.f,\ -\/770.0f);}
\DoxyCodeLine{00250\ \ \ \ \ \ \ \ \ aimPos\ =\ glm::vec3(\ 0,0,0\ );}
\DoxyCodeLine{00251\ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00252\ \ \ \ \ \ \ \ \ currentViewMode\ =\ ViewMode::Y\_UP;}
\DoxyCodeLine{00253\ \ \ \ \ \ \ \ \ upDir\ =\ glm::vec3(\ 0,-\/1,0\ );}
\DoxyCodeLine{00254\ }
\DoxyCodeLine{00255\ \ \ \ \ \ \ \ \ init();}
\DoxyCodeLine{00256\ }
\DoxyCodeLine{00257\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00258\ \ \ \ \ \}}
\DoxyCodeLine{00259\ \ \ \ \ \textcolor{keywordtype}{float}\ getMinScale()\ \{}
\DoxyCodeLine{00260\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_minScale;}
\DoxyCodeLine{00261\ \ \ \ \ \}}
\DoxyCodeLine{00262\ }
\DoxyCodeLine{00263\ \ \ \ \ \textcolor{keywordtype}{float}\ getMaxScale()\ \{}
\DoxyCodeLine{00264\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_maxScale;}
\DoxyCodeLine{00265\ \ \ \ \ \}}
\DoxyCodeLine{00266\ }
\DoxyCodeLine{00267\ }
\DoxyCodeLine{00268\ \ \ \ \ \textcolor{keywordtype}{bool}\ isPointInCameraView(\textcolor{keyword}{const}\ glm::vec4\ point,\ \textcolor{keywordtype}{float}\ margin)}
\DoxyCodeLine{00269\ \ \ \ \ \{}
\DoxyCodeLine{00270\ \ \ \ \ \ \ \ \ glm::mat4\ vpMatrix\ =\ \_cameraMatrix;}
\DoxyCodeLine{00271\ }
\DoxyCodeLine{00272\ \ \ \ \ \ \ \ \ glm::vec4\ clipSpacePos\ =\ vpMatrix\ *\ point;}
\DoxyCodeLine{00273\ }
\DoxyCodeLine{00274\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clipSpacePos.w\ !=\ 0.0f)\ \{}
\DoxyCodeLine{00275\ \ \ \ \ \ \ \ \ \ \ \ \ clipSpacePos.x\ /=\ clipSpacePos.w;}
\DoxyCodeLine{00276\ \ \ \ \ \ \ \ \ \ \ \ \ clipSpacePos.y\ /=\ clipSpacePos.w;}
\DoxyCodeLine{00277\ \ \ \ \ \ \ \ \ \ \ \ \ clipSpacePos.z\ /=\ clipSpacePos.w;}
\DoxyCodeLine{00278\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00279\ }
\DoxyCodeLine{00280\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ 0.2f\ is\ the\ margin}}
\DoxyCodeLine{00281\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clipSpacePos.x\ <\ -\/1.0f\ -\/\ margin\ ||\ clipSpacePos.x\ >\ 1.0f\ +\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00282\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clipSpacePos.y\ <\ -\/1.0f\ -\/\ margin\ ||\ clipSpacePos.y\ >\ 1.0f\ +\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00283\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (clipSpacePos.z\ <\ -\/margin\ ||\ clipSpacePos.z\ >\ 1.0f\ +\ margin)\ \textcolor{keywordflow}{return}\ \textcolor{keyword}{false};}
\DoxyCodeLine{00284\ }
\DoxyCodeLine{00285\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{true};}
\DoxyCodeLine{00286\ \ \ \ \ \}}
\DoxyCodeLine{00287\ }
\DoxyCodeLine{00288\ \ \ \ \ \textcolor{keywordtype}{bool}\ hasChanged()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00289\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ \_cameraChange;}
\DoxyCodeLine{00290\ \ \ \ \ \}}
\DoxyCodeLine{00291\ }
\DoxyCodeLine{00292\ \ \ \ \ \textcolor{keywordtype}{void}\ makeCameraDirty()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00293\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{true};}
\DoxyCodeLine{00294\ \ \ \ \ \}}
\DoxyCodeLine{00295\ }
\DoxyCodeLine{00296\ \ \ \ \ \textcolor{keywordtype}{void}\ refreshCamera()\textcolor{keyword}{\ override\ }\{}
\DoxyCodeLine{00297\ \ \ \ \ \ \ \ \ \_cameraChange\ =\ \textcolor{keyword}{false};}
\DoxyCodeLine{00298\ \ \ \ \ \}}
\DoxyCodeLine{00299\ }
\DoxyCodeLine{00300\ \ \ \ \ \textcolor{comment}{//\ Function\ to\ cast\ a\ ray\ from\ screen\ coordinates\ into\ world\ space}}
\DoxyCodeLine{00301\ \ \ \ \ glm::vec3\ castRayAt(\textcolor{keyword}{const}\ glm::vec2\&\ screenPos)\ \{}
\DoxyCodeLine{00302\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ screen\ position\ to\ normalized\ device\ coordinates\ (NDC)}}
\DoxyCodeLine{00303\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ x\ =\ (2.0f\ *\ screenPos.x)\ /\ \_screenWidth\ -\/\ 1.0f;}
\DoxyCodeLine{00304\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ y\ =\ 1.0f\ -\/\ (2.0f\ *\ screenPos.y)\ /\ \_screenHeight;}
\DoxyCodeLine{00305\ \ \ \ \ \ \ \ \ glm::vec4\ clipCoords\ =\ glm::vec4(x,\ y,\ -\/1.0f,\ 1.0f);}
\DoxyCodeLine{00306\ }
\DoxyCodeLine{00307\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ to\ eye\ space}}
\DoxyCodeLine{00308\ \ \ \ \ \ \ \ \ glm::vec4\ eyeCoords\ =\ glm::inverse(\_projectionMatrix)\ *\ clipCoords;}
\DoxyCodeLine{00309\ \ \ \ \ \ \ \ \ eyeCoords\ =\ glm::vec4(eyeCoords.x,\ eyeCoords.y,\ -\/1.0f,\ 0.0f);}
\DoxyCodeLine{00310\ }
\DoxyCodeLine{00311\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Convert\ to\ world\ space}}
\DoxyCodeLine{00312\ \ \ \ \ \ \ \ \ glm::vec3\ worldRay\ =\ glm::vec3(glm::inverse(\_viewMatrix)\ *\ eyeCoords);}
\DoxyCodeLine{00313\ \ \ \ \ \ \ \ \ worldRay\ =\ glm::normalize(worldRay);}
\DoxyCodeLine{00314\ }
\DoxyCodeLine{00315\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ worldRay;}
\DoxyCodeLine{00316\ \ \ \ \ \}}
\DoxyCodeLine{00317\ \ \ \ \ glm::vec3\ getPointOnRayAtZ(\textcolor{keyword}{const}\ glm::vec3\&\ rayOrigin,\ \textcolor{keyword}{const}\ glm::vec3\&\ rayDirection,\ \textcolor{keywordtype}{float}\ desiredZ)\ \{}
\DoxyCodeLine{00318\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Check\ if\ the\ ray\ is\ parallel\ to\ the\ z-\/plane\ (no\ intersection)}}
\DoxyCodeLine{00319\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (rayDirection.z\ ==\ 0.0f)\ \{}
\DoxyCodeLine{00320\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Ray\ is\ parallel\ to\ the\ plane,\ no\ intersection}}
\DoxyCodeLine{00321\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ glm::vec3(std::numeric\_limits<float>::infinity());\ \textcolor{comment}{//\ Return\ invalid\ point}}
\DoxyCodeLine{00322\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{00323\ }
\DoxyCodeLine{00324\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ t\ for\ the\ desired\ z\ value}}
\DoxyCodeLine{00325\ \ \ \ \ \ \ \ \ \textcolor{keywordtype}{float}\ t\ =\ (desiredZ\ -\/\ rayOrigin.z)\ /\ rayDirection.z;}
\DoxyCodeLine{00326\ }
\DoxyCodeLine{00327\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Calculate\ the\ point\ on\ the\ ray}}
\DoxyCodeLine{00328\ \ \ \ \ \ \ \ \ glm::vec3\ pointOnRay\ =\ rayOrigin\ +\ t\ *\ rayDirection;}
\DoxyCodeLine{00329\ }
\DoxyCodeLine{00330\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return}\ pointOnRay;}
\DoxyCodeLine{00331\ \ \ \ \ \}}
\DoxyCodeLine{00332\ }
\DoxyCodeLine{00333\ \textcolor{keyword}{private}:}
\DoxyCodeLine{00334\ \ \ \ \ \textcolor{keywordtype}{int}\ \_screenWidth,\ \_screenHeight;}
\DoxyCodeLine{00335\ \ \ \ \ \textcolor{keywordtype}{float}\ \_minScale\ =\ 0.1f,\ \_maxScale\ =\ 5.0f;}
\DoxyCodeLine{00336\ \ \ \ \ \textcolor{keywordtype}{float}\ \_scale;\ \textcolor{comment}{//\ decreases\ when\ zoom-\/out}}
\DoxyCodeLine{00337\ \ \ \ \ \textcolor{keywordtype}{bool}\ \_cameraChange;}
\DoxyCodeLine{00338\ }
\DoxyCodeLine{00339\ \ \ \ \ glm::vec2\ \_position;}
\DoxyCodeLine{00340\ \ \ \ \ glm::mat4\ \_projectionMatrix;\ \textcolor{comment}{//\ changed\ once\ in\ init}}
\DoxyCodeLine{00341\ \ \ \ \ glm::mat4\ \_viewMatrix;}
\DoxyCodeLine{00342\ \ \ \ \ glm::mat4\ \_cameraMatrix;}
\DoxyCodeLine{00343\ \};}

\end{DoxyCode}
